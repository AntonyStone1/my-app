(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{2:function(e,t,a){e.exports={form_container:"Auth_form_container__2Y85I",auth_heading:"Auth_auth_heading__Rhc_g",auth_required:"Auth_auth_required__2V3HO",auth_input:"Auth_auth_input__25e7L",auth_login_btn:"Auth_auth_login_btn__1sBGp",auth_label:"Auth_auth_label__1oIE2",auth_submit_btn:"Auth_auth_submit_btn__BLcGG",no_acc__heading:"Auth_no_acc__heading__39GKi",no_acc__link:"Auth_no_acc__link__1ZDfB",pass_eye__open:"Auth_pass_eye__open__2ds_p",pass_eye__close:"Auth_pass_eye__close__18ms_"}},41:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(32),r=a.n(s),i=(a(41),a(13)),u=a(5),o=a(4),l=a(10),j=a(7),d=a(33),b=a(20),h=a.n(b),m=a(1),_=c.a.createContext();function p(e){var t=e.children,a=Object(n.useState)([]),c=Object(o.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(!1),u=Object(o.a)(i,2),l=u[0],j=u[1];return Object(m.jsx)(_.Provider,{value:{userData:s,setUserData:r,isLoaded:l,setLoaded:j},children:t})}var O=function(){var e=c.a.useContext(_);if(void 0===e)throw new Error("useUserData must be used within a CountProvider");return e},x=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],c=t[1],s=O(),r=s.userData,i=s.setUserData,b=s.isLoaded,_=s.setLoaded,p=Object(u.g)(),x=Object(n.useState)({name:"",company:{name:""},website:""}),g=Object(o.a)(x,2),f=g[0],v=g[1],N=Object(u.i)().id,y=r.find((function(e){return e.id===+N}));console.log(y),Object(d.useEffect)((function(){b?v(r.find((function(e){return e.id===+N}))):fetch("https://jsonplaceholder.typicode.com/users/".concat(N),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){v(e),_((function(e){return!e}))}))}),[]);var w=function(){c((function(e){return!e}))},C=function(e){v((function(t){return"company"!==e.target.name?Object(j.a)(Object(j.a)({},t),{},Object(l.a)({},e.target.name,e.target.value)):Object(j.a)(Object(j.a)({},t),{},{company:{name:e.target.value}})}))};console.log(1);return Object(m.jsxs)("div",{className:"user_page-container",children:[Object(m.jsx)("span",{className:"close_btn",onClick:function(){p.push({pathname:"/home/"})}}),Object(m.jsxs)("h1",{className:"user-page-heading",children:["Home page of ",null===y||void 0===y?void 0:y.name]}),Object(m.jsxs)("div",{className:"user_page-item",onClick:function(e){e.stopPropagation()},children:[Object(m.jsxs)("div",{className:"user_info",children:[Object(m.jsxs)("label",{htmlFor:"true",children:["Full name:",Object(m.jsx)("input",{onChange:C,name:"name",type:"text",value:f.name,disabled:a})]}),Object(m.jsxs)("label",{htmlFor:"true",children:["Company:",Object(m.jsx)("input",{onChange:C,name:"company",type:"text",value:f.company.name,disabled:a})]}),Object(m.jsxs)("label",{htmlFor:"true",children:["Website:",Object(m.jsx)("input",{onChange:C,name:"website",type:"text",value:f.website,disabled:a})]}),!a&&Object(m.jsx)("button",{type:"button",onClick:function(){h.a.put("https://jsonplaceholder.typicode.com/users/".concat(N),{data:JSON.stringify(f)}).then((function(e){e.data&&(w(),i((function(e){return e.map((function(e){return e.id===+N?Object(j.a)(Object(j.a)({},e),f):e}))})))}))},className:"btn user_save-btn",children:"Save"})]}),Object(m.jsx)("div",{className:"user_edit-btns",children:Object(m.jsx)("button",{type:"button",className:"btn",onClick:w,children:"Edit"})})]})]})},g=function(){var e=O().userData,t=Object(u.g)(),a=Object(n.useState)(!1),c=Object(o.a)(a,2),s=c[0],r=(c[1],function(e){t.push({pathname:"/home/user/".concat(e.target.id)})});return e?Object(m.jsx)("div",{className:"user_container",children:s.show?Object(m.jsx)(x,{}):e.map((function(e,t){return Object(m.jsxs)("div",{className:"user_item",id:e.id,onClick:r,children:[Object(m.jsxs)("p",{children:[t+1," ",e.name]}),Object(m.jsx)("p",{children:e.company.name}),Object(m.jsx)("p",{children:e.website})]},e.id)}))}):Object(m.jsx)("span",{children:"Loading..."})},f=function(e){return localStorage.getItem(e)},v=Object(n.createContext)();function N(e){var t=e.children,a=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)({name:null,password:null}),r=Object(o.a)(s,2),i=r[0],u=r[1],l=Object(n.useState)(),j=Object(o.a)(l,2),d=j[0],b=j[1];function h(e,t){if(f(e)===t)return u({name:e,password:t}),console.log("use",a),c(!0)}function m(e,t){var a,n;e&&t&&(a=e,n=t,localStorage.setItem(a,n),h(e,t))}function _(){c(!1)}return{user:i,isAuth:a,logIn:h,logOut:_,signIn:m,setUser:u,setAuth:c,haveAccount:d,setAccount:b}}();return Object(m.jsx)(v.Provider,{value:a,children:t})}var y=function(){return Object(n.useContext)(v)};var w=a(36),C=a(2),A=a.n(C),S=function(){var e,t,a,c,s,r,d=y(),b=d.logIn,h=d.isAuth,_=d.signIn,p=Object(w.a)(),O=p.register,x=p.handleSubmit,g=p.formState.errors,f=Object(n.useState)({name:"",password:""}),v=Object(o.a)(f,2),N=v[0],C=v[1],S=Object(n.useState)(!1),k=Object(o.a)(S,2),q=k[0],L=k[1],F=Object(n.useState)(!1),I=Object(o.a)(F,2),D=I[0],U=I[1],P="password",E="text",G=Object(u.h)(),z=function(){U((function(e){return!e}))},B=function(e){C((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(l.a)({},e.target.name,e.target.value))}))};return h?Object(m.jsx)(u.a,{to:"/home"}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{className:A.a.auth_heading,children:"Authorization"}),"/login"===G.pathname?Object(m.jsxs)("div",{className:A.a.form_container,children:[Object(m.jsx)("label",{className:A.a.auth_label,children:"Name"}),Object(m.jsx)("input",{name:"name",autoComplete:"off",onChange:B,className:A.a.auth_input}),Object(m.jsxs)("label",{className:A.a.auth_label,children:["Password",Object(m.jsx)("span",{className:D?A.a.pass_eye__close:A.a.pass_eye__open,onClick:z}),Object(m.jsx)("input",{name:"password",type:D?E:P,onChange:B,className:A.a.auth_input})]}),q&&Object(m.jsx)("p",{className:A.a.auth_required,children:"Wrong name or password"}),Object(m.jsx)("button",{type:"button",onClick:function(){b(N.name,N.password),h||L(!0)},className:A.a.auth_login_btn,children:"log In"}),Object(m.jsx)("div",{className:A.a.no_acc__heading,children:"Dont have account?"}),Object(m.jsx)("div",{className:A.a.no_acc__link,children:Object(m.jsx)(i.b,{to:"/registration",children:"Sign Up"})})]}):Object(m.jsxs)("form",{onSubmit:x((function(e){return _(e.name,e.password)})),className:A.a.form_container,children:[Object(m.jsx)("label",{className:A.a.auth_label,children:"Name"}),Object(m.jsx)("input",Object(j.a)(Object(j.a)({},O("name",{required:!0,maxLength:20,minLength:3,pattern:/^[A-Za-z]+$/i})),{},{autoComplete:"off",className:A.a.auth_input})),"required"===(null===g||void 0===g||null===(e=g.name)||void 0===e?void 0:e.type)&&Object(m.jsx)("p",{className:A.a.auth_required,children:"This field is required"}),"maxLength"===(null===g||void 0===g||null===(t=g.name)||void 0===t?void 0:t.type)&&Object(m.jsx)("p",{className:A.a.auth_required,children:"First name cannot exceed 20 characters"}),"minLength"===(null===g||void 0===g||null===(a=g.name)||void 0===a?void 0:a.type)&&Object(m.jsx)("p",{className:A.a.auth_required,children:"Password must be at least 3 characters long"}),"pattern"===(null===g||void 0===g||null===(c=g.name)||void 0===c?void 0:c.type)&&Object(m.jsx)("p",{className:A.a.auth_required,children:"Alphabetical characters only"}),Object(m.jsxs)("label",{className:A.a.auth_label,children:["Password",Object(m.jsx)("span",{className:D?A.a.pass_eye__close:A.a.pass_eye__open,onClick:z}),Object(m.jsx)("input",Object(j.a)(Object(j.a)({type:D?E:P},O("password",{required:!0,pattern:/(?=.*[0-9])(?=.*[A-Z])(?=.*[a-z])[0-9a-zA-Z]{8,}/g})),{},{className:A.a.auth_input}))]}),"required"===(null===g||void 0===g||null===(s=g.password)||void 0===s?void 0:s.type)&&Object(m.jsx)("p",{className:A.a.auth_required,children:"This field is required"}),"pattern"===(null===g||void 0===g||null===(r=g.password)||void 0===r?void 0:r.type)&&Object(m.jsx)("p",{className:A.a.auth_required,children:"Must include at least one capital letter, one number and must be at least 8 characters long"}),Object(m.jsx)("input",{type:"submit",value:"Sign up",className:A.a.auth_submit_btn})]})]})};var k=function(){var e=y().logOut;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"user_heading-container",children:[Object(m.jsx)("h1",{className:"user_headt-text",children:"User list"}),Object(m.jsx)("button",{type:"button",className:"logout_btn",onClick:e,children:"Log Out"})]})})};var q=function(){var e=y().logOut;return Object(m.jsxs)("div",{className:"user_container-heading",children:[Object(m.jsx)("h1",{children:"User Page"}),Object(m.jsx)("button",{type:"button",className:"logout_btn",onClick:e,children:"Log Out"})]})},L=function(e){var t=e.children,a=y(),n=a.isAuth,c=a.user;return f(c.name)===c.password&&n?Object(m.jsx)(m.Fragment,{children:t}):Object(m.jsx)(u.a,{to:"/login"})};function F(){var e=O().setUserData;return Object(n.useEffect)((function(){h.a.get("https://jsonplaceholder.typicode.com/users/").then((function(t){return e(t.data)}))}),[]),Object(m.jsx)(i.a,{children:Object(m.jsxs)(u.d,{children:[Object(m.jsx)(u.b,{exact:!0,path:"/login",render:function(){return Object(m.jsx)(S,{})}}),Object(m.jsx)(u.b,{path:"/registration",render:function(){return Object(m.jsx)(S,{})}}),Object(m.jsxs)(L,{children:[Object(m.jsxs)(u.b,{exact:!0,path:"/home",children:[Object(m.jsx)(k,{}),Object(m.jsx)(g,{})]}),Object(m.jsxs)(u.b,{path:"/home/user/:id",children:[Object(m.jsx)(q,{}),Object(m.jsx)(x,{})]})]})]})})}function I(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(p,{children:Object(m.jsx)(N,{children:Object(m.jsx)("div",{className:"wrapper",children:Object(m.jsx)(F,{})})})})})}r.a.render(Object(m.jsx)(I,{}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.806cfd2c.chunk.js.map